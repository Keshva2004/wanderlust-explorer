<% layout("/layouts/boilerplate.ejs")%>
<style>
  #filters {
    display: flex;
    align-items: center;
    margin-right: 2rem;
    flex-wrap: nowrap;
    overflow-x: auto;
    padding: 1rem 0;
    scrollbar-width: thin; /* Firefox */
  }
  #filters::-webkit-scrollbar {
    height: 4px; /* Chrome, Safari */
  }

  .filter {
    text-align: center;
    color: black;
    text-decoration: none;
    margin-right: 2rem;
    opacity: 0.7;
    cursor: pointer;
    flex: 0 0 auto; /* Prevent shrinking */
  }
  .filter p {
    font-size: 0.9rem;
  }
  .filter:hover {
    opacity: 1;
  }

  .switch-toggle {
    border: 1px solid black;
    border-radius: 0.8rem;
    height: 4rem;
    padding: 1rem;
    display: flex;
    align-items: center;
    margin-left: auto;
  }
  .tax-toggle {
    display: none;
  }

  /* Mobile view */
  @media (max-width: 768px) {
    .switch-toggle {
      margin: 2rem auto 0 auto; /* Center below filters */
      width: fit-content;
    }
    #filters {
      order: 1;
    }
  }
</style>

<body>
  <div class="row align-items-center gx-3">
    <div class="col-12 col-md-auto" id="filters">
  <a href="/listings/category/Trending" class="filter">
    <div><i class="fa-solid fa-fire"></i></div><p>Trending</p>
  </a>

  <a href="/listings/category/Rooms" class="filter">
    <div><i class="fa-solid fa-bed"></i></div><p>Rooms</p>
  </a>

  <a href="/listings/category/Iconic%20Cities" class="filter">
    <div><i class="fa-solid fa-mountain-city"></i></div><p>Iconic Cities</p>
  </a>

  <a href="/listings/category/Mountains" class="filter">
    <div><i class="fa-solid fa-mountain"></i></div><p>Mountains</p>
  </a>

  <a href="/listings/category/Castles" class="filter">
    <div><i class="fa-solid fa-chess-rook"></i></div><p>Castles</p>
  </a>

  <a href="/listings/category/Amazing%20pools" class="filter">
    <div><i class="fa-solid fa-person-swimming"></i></div><p>Amazing pools</p>
  </a>

  <a href="/listings/category/Camping" class="filter">
    <div><i class="fa-solid fa-campground"></i></div><p>Camping</p>
  </a>

  <a href="/listings/category/Farms" class="filter">
    <div><i class="fa-solid fa-cow"></i></div><p>Farms</p>
  </a>

  <a href="/listings/category/Arctic" class="filter">
    <div><i class="fa-solid fa-snowman"></i></div><p>Arctic</p>
  </a>

  <a href="/listings/category/Play" class="filter">
    <div><i class="fa-solid fa-gamepad"></i></div><p>Play</p>
  </a>

  <a href="/listings/category/Boats" class="filter">
    <div><i class="fa-solid fa-ship"></i></div><p>Boats</p>
  </a>
</div>


    <div class="col-12 col-md-auto">
      <div class="switch-toggle">
        <div class="form-check-reverse form-switch">
          <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
          <label class="form-check-label" for="switchCheckDefault">Display with taxes</label>
        </div>
      </div>
    </div>
  </div>
</body>

    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1" >

        <% for(listing of allListings){ %>
          <a href="/listings/<%=listing._id%>" class="listing-links">
            <div class="card list-card">
    <img src="<%=listing.image.url%>" class="card-img-top" alt="<%= listing.image.filename%>">
    <div class="card-img-overlay"></div>
  <div class="card-body">
    <p class="card-text"> 
       <b><%= listing.title %></b>  <br>
        &#8377; 
      <%= listing.price ? listing.price.toLocaleString("en-IN") : "N/A" %> /night
      <i class="tax-toggle"> &nbsp; &nbsp; +18% GST</i>

    </p>
  </div>
  </div>
</a>
    
   <% } %>

    </div>
    
<script>
  const taxSwitch = document.getElementById("switchCheckDefault");
  taxSwitch.addEventListener("click", () => {
    const taxInfo = document.getElementsByClassName("tax-toggle");
    for(tax of taxInfo){
      if(tax.style.display !== "inline"){
        tax.style.display = "inline";
      } else {
        tax.style.display = "none";
      }
    }
  })
</script>
</body>
